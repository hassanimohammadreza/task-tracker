{% extends "base.html" %}
{% block title %}Dashboard{% endblock %}

{% block styles %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/ui.css') }}">
{% endblock %}

{% block content %}
<div class="dashboard-container">

    <header class="header">
        <h1 class="title">Tasks</h1>
        <a href="{{ url_for('auth.logout') }}" class="logout-btn">Logout</a>
    </header>

    {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
            {% for category, message in messages %}
                <div class="flash {{ category }}">{{ message }}</div>
            {% endfor %}
        {% endif %}
    {% endwith %}

    <form method="POST" action="{{ url_for('main.add_task') }}" class="add-task-form">
        <input type="text" name="task" placeholder="Add a new task" class="input-task" required>
        <button type="submit" class="add-btn">Add</button>
    </form>

    <div class="task-list">
        {% for task in tasks %}
        <div class="task-card {% if task.done %}done{% endif %}">
            <span class="task-name">{{ task.name }}</span>

            <div class="task-actions">
                <a href="{{ url_for('main.toggle_task', id=task.id) }}" class="action-btn">
                    {% if task.done %}Undo{% else %}Done{% endif %}
                </a>
                <a href="{{ url_for('main.delete_task', id=task.id) }}" class="action-btn delete">
                    Delete
                </a>
            </div>
        </div>
        {% else %}
        <div class="empty-state">
            <p>No tasks yet</p>
        </div>
        {% endfor %}
    </div>

</div>
{% endblock %}